<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Asset Price List</title>
</head>
<body>

<h2>Asset Price List</h2>

<!-- Placeholder for the API response -->
<div id="price-list">
    Loading price list...
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    fetchPriceList();
});

function fetchPriceList() {
    fetch('https://dev-api.ainsliebullion.com.au/assets/pricelist', {
        method: 'GET',
        credentials: 'include' // Ensure cookies are included with the request
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json();
    })
    .then(data => {
        displayPriceList(data);
    })
    .catch(error => {
        console.error('There has been a problem with your fetch operation:', error);
        document.getElementById('price-list').innerHTML = '<p>Error loading price list.</p>';
    });
}

function displayPriceList(data) {
    const priceListDiv = document.getElementById('price-list');
    let html = '<ul>';
    if (data && Array.isArray(data.data)) {
        data.data.forEach(item => {
            html += `<li>${item.asset}: $${item.price}</li>`;
        });
    } else {
        html += '<li>No data found</li>';
    }
    html += '</ul>';
    priceListDiv.innerHTML = html;
}
</script>

</body>
</html>
